<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>rich-markdown-to-html Demo</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: "Space Grotesk", "Trebuchet MS", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }

    .topbar {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      padding: 0.75rem 1rem;
      background: #111827;
      color: #f3f4f6;
      align-items: center;
    }

    .topbar a {
      font-size: 0.8rem;
      color: #e5e7eb;
      text-decoration: none;
      border: 1px solid #374151;
      padding: 0.35rem 0.75rem;
      border-radius: 999px;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: calc(100vh - 52px);
    }

    .panel {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .panel-header {
      padding: 1rem;
      background: #333;
      color: white;
      font-weight: 600;
    }

    .panel-content {
      flex: 1;
      overflow: auto;
    }

    #editor {
      width: 100%;
      height: 100%;
      padding: 1rem;
      border: none;
      resize: none;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 14px;
      line-height: 1.5;
    }

    #preview {
      padding: 1rem 2rem;
      background: white;
    }

    /* Preview Styles */
    #preview h1, #preview h2, #preview h3,
    #preview h4, #preview h5, #preview h6 {
      margin-top: 1.5em;
      margin-bottom: 0.5em;
      color: #333;
    }

    #preview h1 { font-size: 2rem; border-bottom: 2px solid #eee; padding-bottom: 0.3em; }
    #preview h2 { font-size: 1.5rem; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }
    #preview h3 { font-size: 1.25rem; }

    #preview p {
      line-height: 1.6;
      color: #444;
    }

    #preview a {
      color: #007bff;
      text-decoration: none;
    }

    #preview a:hover {
      text-decoration: underline;
    }

    #preview code {
      background: #f4f4f4;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.9em;
    }

    #preview pre {
      background: #282c34;
      color: #abb2bf;
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
    }

    #preview pre code {
      background: transparent;
      padding: 0;
      color: inherit;
    }

    #preview blockquote {
      border-left: 4px solid #007bff;
      margin: 1em 0;
      padding: 0.5em 1em;
      background: #f8f9fa;
      color: #666;
    }

    #preview ul, #preview ol {
      padding-left: 2em;
      line-height: 1.8;
    }

    #preview .task-list {
      list-style: none;
      padding-left: 0;
    }

    #preview .task-list-item {
      display: flex;
      align-items: center;
      gap: 0.5em;
    }

    #preview .task-list-item input {
      margin: 0;
    }

    #preview table {
      border-collapse: collapse;
      width: 100%;
      margin: 1em 0;
    }

    #preview th, #preview td {
      border: 1px solid #ddd;
      padding: 0.75em;
    }

    #preview th {
      background: #f4f4f4;
      font-weight: 600;
    }

    #preview tr:nth-child(even) {
      background: #f9f9f9;
    }

    #preview hr {
      border: none;
      border-top: 2px solid #eee;
      margin: 2em 0;
    }

    #preview img {
      max-width: 100%;
      height: auto;
    }

    .options {
      padding: 0.5rem 1rem;
      background: #e9ecef;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      font-size: 0.875rem;
    }

    .options label {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      cursor: pointer;
    }

    .toc {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 4px;
      margin-bottom: 1rem;
    }

    .toc ul {
      list-style: none;
      padding-left: 1em;
      margin: 0;
    }

    .toc > ul {
      padding-left: 0;
    }

    .toc a {
      color: #555;
    }

    .toc-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <a href="https://manufosela.github.io/utils/">Utils catalog</a>
    <a href="https://manufosela.github.io/">Main catalog</a>
    <a href="https://github.com/manufosela/utils/tree/main/packages/rich-markdown-to-html">Source</a>
    <span style="margin-left: auto; font-size: 0.85rem; color: #9ca3af;">Live markdown playground</span>
  </div>
  <div class="container">
    <div class="panel">
      <div class="panel-header">Markdown Input</div>
      <div class="options">
        <label><input type="checkbox" id="breaks"> Line Breaks</label>
        <label><input type="checkbox" id="linkify" checked> Auto-link URLs</label>
        <label><input type="checkbox" id="taskLists" checked> Task Lists</label>
        <label><input type="checkbox" id="tables" checked> Tables</label>
        <label><input type="checkbox" id="typographer"> Typographer</label>
        <label><input type="checkbox" id="showToc"> Show TOC</label>
      </div>
      <div class="panel-content">
        <textarea id="editor"># Welcome to Rich Markdown

This is a **live preview** markdown editor powered by `@manufosela/rich-markdown-to-html`.

## Features

### Text Formatting

You can use **bold**, *italic*, and ~~strikethrough~~ text.

### Code

Inline code: `const x = 1;`

Code blocks with syntax highlighting:

```javascript
function greet(name) {
  console.log(`Hello, ${name}!`);
}
```

### Lists

Unordered list:
- Item one
- Item two
- Item three

Ordered list:
1. First item
2. Second item
3. Third item

### Task Lists

- [x] Completed task
- [ ] Incomplete task
- [x] Another done task

### Blockquotes

> This is a blockquote.
> It can span multiple lines.

### Tables

| Feature | Status | Notes |
|:--------|:------:|------:|
| Tables | Done | Aligned! |
| Lists | Done | Task lists too |
| Code | Done | With highlighting |

### Links and Images

Visit [Google](https://google.com "Search Engine") for more info.

Auto-linked URL: https://example.com

---

## Try It!

Edit this text and see the live preview update instantly.
</textarea>
      </div>
    </div>
    <div class="panel">
      <div class="panel-header">HTML Preview</div>
      <div class="panel-content" id="preview"></div>
    </div>
  </div>

  <script type="module">
    import { parse, generateTOC, renderTOC } from '../src/index.js';

    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');
    const optionBreaks = document.getElementById('breaks');
    const optionLinkify = document.getElementById('linkify');
    const optionTaskLists = document.getElementById('taskLists');
    const optionTables = document.getElementById('tables');
    const optionTypographer = document.getElementById('typographer');
    const optionShowToc = document.getElementById('showToc');

    function updatePreview() {
      const options = {
        breaks: optionBreaks.checked,
        linkify: optionLinkify.checked,
        taskLists: optionTaskLists.checked,
        tables: optionTables.checked,
        typographer: optionTypographer.checked
      };

      const markdown = editor.value;
      let html = '';

      if (optionShowToc.checked) {
        const toc = generateTOC(markdown, { maxLevel: 3 });
        if (toc.length > 0) {
          html += '<div class="toc"><div class="toc-title">Table of Contents</div>';
          html += renderTOC(toc);
          html += '</div>';
        }
      }

      html += parse(markdown, options);
      preview.innerHTML = html;
    }

    // Initial render
    updatePreview();

    // Update on input
    editor.addEventListener('input', updatePreview);

    // Update on option change
    [optionBreaks, optionLinkify, optionTaskLists, optionTables, optionTypographer, optionShowToc]
      .forEach(el => el.addEventListener('change', updatePreview));
  </script>
</body>
</html>
