---
import DemoLayout from "../../../../layouts/DemoLayout.astro";
import { getComponents } from "../../../../utils/components";
import { loadDemo } from "../../../../utils/demo-loader";
import { siteConfig } from "../../../../data/site";

export function getStaticPaths() {
  const components = getComponents().filter((component) => component.hasPlayground);
  return components.map((component) => ({
    params: { slug: component.slug },
    props: { component },
  }));
}

const { component } = Astro.props;
const demo = loadDemo(component.slug, "playground");
const links = [
  { label: "‚Üê Back to components", href: siteConfig.basePath || "/" },
  { label: "Demo", href: `../../${component.slug}/demo/` },
  { label: "GitHub Repo", href: siteConfig.repoUrl },
];
---
<DemoLayout title={`${component.title} Playground`} subtitle={component.description} links={links}>
  {demo ? (
    <>
      {demo.links && <div set:html={demo.links} />}
      {demo.styles && <div set:html={demo.styles} />}
      <div class="demo-embed" set:html={demo.body} />
      {demo.scripts && <div set:html={demo.scripts} />}
    </>
  ) : (
    <p>No playground content found.</p>
  )}
</DemoLayout>
